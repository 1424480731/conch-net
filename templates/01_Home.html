<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>海螺租房</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap core CSS -->
    <link href="/static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/static/bootstrap/assets/css/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/static/bootstrap/assets/css/style.css">
    <link rel="stylesheet" type="text/css" href="/static/bootstrap/assets/css/responsive.css">
</head>

<body>
    <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->


    <div class="wrapper alternative-hp">

        <header>
            <div class="top-bar"  style="background-color: rgba(0,0,0,0.87)">
                <div class="container">
                    <div class="row" >

                        <div class="btn-group col-lg-1">
                           <button class="btn btn-default dropdown-toggle text-muted" style="background-color: transparent;border-style: none;font-size: small;box-shadow: none; padding-top: 15px" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              全国</span>
                           </button>
                           <ul class="dropdown-menu" id="btn_m_1" aria-labelledby="dropdownMenu1" style="height:300px;overflow:scroll;"></ul>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-4">

                            <address class="contact-num">
                                <span><i class="fa fa-phone" style="padding-top: 20px"></i> +86 13653803657</span>
                            </address>
                        </div>

                        <div class="col-lg-2">
                            <a href="{% url 'mision:home' %}" title="" style="padding-left: 70px">
                                <img src="/static/images/hailuo.png"  alt="">
                            </a>
                        </div>
                        <div class="col-lg-5 col-md-5 col-sm-5 col-5">
                            <div class="log-details">
                                {% if user %}
                                    <span class="login-form" ><a href="{% url 'login:out' %}" style="padding-top: 20px"><i class="la la-user" style="padding-top: 20px" id="log_out"></i><span><b style="padding-top: 20px">{{ user}}</b></span></a></span>
                                {% else %}
                                    <span class="login-form"><i class="la la-user" style="padding-top: 20px"></i><b  style="padding-top: 20px" >{{ login_msg }}</b> <b  style="padding-top: 20px">登录</b>/<b style="padding-top: 20px">注册</b></span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div><!--top-bar end-->

        </header><!--header end-->
        <section class="main-banner-sec overlay">
            <div class="container">

                <div class="banner-details text-center">

                    <h2>寻找属于你的海螺</h2>
                    <p>静谧夜晚，吹走凋落的回音</p>
                    <form action='{% url "mision:search" %}' method="post">
                        {% csrf_token %}
                        <div class="form-field back-shd">
                            <input type="text" name="search" placeholder="街道  或者 城市">
                            <button type="submit"><i class="la la-search"></i></button>
                        </div><!--form-field end-->
                    </form>
                </div><!--banner-details end-->
            </div>
        </section><!--main-banner-sec end-->

        <section class="sale-items-sec sec-padding">
            <div class="container-fluid">
                <div class="sec-title text-center">
                    <h3>最新出租</h3>
                </div>
                <div class="sales-items">
                    <div class="row">

                        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6">
                            <div class="sale-item">
                                <div class="item-img">
                                    <a href="#" title="" class="ext-link">
                                        <img src="/static/bootstrap/assets/images/resources/img4.jpg" id='img_1' alt="">
                                    </a>
                                    <span class="item-status">待租的</span>
                                </div>
                                <div class="item-info">
                                    <h3><a href="#" title="" id="title_1">Dramatic and Unique Condo</a></h3>
                                    <span id="address_1">Reno Pl, San Francisco, CA 94133</span>
                                    <div class="specs-info">
                                        <ul>
                                            <li id="layout_1">布局: 2 </li>
                                            <li id="area_1">平方米: 1,570</li>
                                        </ul>
                                        <strong class="item-price" id="price_1">$499,500</strong>
                                    </div><!--specs-info end-->
                                </div><!--item-info end-->
                            </div><!--sale-item end-->
                        </div>
                        
                        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6">
                            <div class="sale-item">
                                <div class="item-img">
                                    <a href="#" title="" class="ext-link">
                                        <img src="/static/bootstrap/assets/images/resources/img4.jpg" id='img_2' alt="">
                                    </a>
                                    <span class="item-status">待租的</span>
                                </div>
                                <div class="item-info">
                                    <h3><a href="#" title="" id="title_2">Dramatic and Unique Condo</a></h3>
                                    <span id="address_2">Reno Pl, San Francisco, CA 94133</span>
                                    <div class="specs-info">
                                        <ul>
                                            <li id="layout_2">布局: 2 </li>
                                            <li id="area_2">平方米: 1,570</li>
                                        </ul>
                                        <strong class="item-price" id="price_2">$499,500</strong>
                                    </div><!--specs-info end-->
                                </div><!--item-info end-->
                            </div><!--sale-item end-->
                        </div>
                        
                        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6">
                            <div class="sale-item">
                                <div class="item-img">
                                    <a href="#" title="" class="ext-link">
                                        <img src="/static/bootstrap/assets/images/resources/img4.jpg" id='img_3' alt="">
                                    </a>
                                    <span class="item-status">待租的</span>
                                </div>
                                <div class="item-info">
                                    <h3><a href="#" title="" id="title_3">Dramatic and Unique Condo</a></h3>
                                    <span id="address_3">Reno Pl, San Francisco, CA 94133</span>
                                    <div class="specs-info">
                                        <ul>
                                            <li id="layout_3">布局: 2 </li>
                                            <li id="area_3">平方米: 1,570</li>
                                        </ul>
                                        <strong class="item-price" id="price_3">$499,500</strong>
                                    </div><!--specs-info end-->
                                </div><!--item-info end-->
                            </div><!--sale-item end-->
                        </div>
                        
                        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6">
                            <div class="sale-item">
                                <div class="item-img">
                                    <a href="#" title="" class="ext-link">
                                        <img src="/static/bootstrap/assets/images/resources/img4.jpg" id='img_4' alt="">
                                    </a>
                                    <span class="item-status">待租的</span>
                                </div>
                                <div class="item-info">
                                    <h3><a href="#" title="" id="title_4">Dramatic and Unique Condo</a></h3>
                                    <span id="address_4">Reno Pl, San Francisco, CA 94133</span>
                                    <div class="specs-info">
                                        <ul>
                                            <li id="layout_4">布局: 2 </li>
                                            <li id="area_4">平方米: 1,570</li>
                                        </ul>
                                        <strong class="item-price" id="price_4">$499,500</strong>
                                    </div><!--specs-info end-->
                                </div><!--item-info end-->
                            </div><!--sale-item end-->
                        </div>
                        
                        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6">
                            <div class="sale-item">
                                <div class="item-img">
                                    <a href="#" title="" class="ext-link">
                                        <img src="/static/bootstrap/assets/images/resources/img4.jpg" id='img_5' alt="">
                                    </a>
                                    <span class="item-status">待租的</span>
                                </div>
                                <div class="item-info">
                                    <h3><a href="#" title="" id="title_5">Dramatic and Unique Condo</a></h3>
                                    <span id="address_5">Reno Pl, San Francisco, CA 94133</span>
                                    <div class="specs-info">
                                        <ul>
                                            <li id="layout_5">布局: 2 </li>
                                            <li id="area_5">平方米: 1,570</li>
                                        </ul>
                                        <strong class="item-price" id="price_5">$499,500</strong>
                                    </div><!--specs-info end-->
                                </div><!--item-info end-->
                            </div><!--sale-item end-->
                        </div>
                        
                        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6">
                            <div class="sale-item">
                                <div class="item-img">
                                    <a href="#" title="" class="ext-link">
                                        <img src="/static/bootstrap/assets/images/resources/img4.jpg" id='img_6' alt="">
                                    </a>
                                    <span class="item-status">待租的</span>
                                </div>
                                <div class="item-info">
                                    <h3><a href="#" title="" id="title_6">Dramatic and Unique Condo</a></h3>
                                    <span id="address_6">Reno Pl, San Francisco, CA 94133</span>
                                    <div class="specs-info">
                                        <ul>
                                            <li id="layout_6">布局: 2 </li>
                                            <li id="area_6">平方米: 1,570</li>
                                        </ul>
                                        <strong class="item-price" id="price_6">$499,500</strong>
                                    </div><!--specs-info end-->
                                </div><!--item-info end-->
                            </div><!--sale-item end-->
                        </div>
                        
                        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6">
                            <div class="sale-item">
                                <div class="item-img">
                                    <a href="#" title="" class="ext-link">
                                        <img src="/static/bootstrap/assets/images/resources/img4.jpg" id='img_7' alt="">
                                    </a>
                                    <span class="item-status">待租的</span>
                                </div>
                                <div class="item-info">
                                    <h3><a href="#" title="" id="title_7">Dramatic and Unique Condo</a></h3>
                                    <span id="address_7">Reno Pl, San Francisco, CA 94133</span>
                                    <div class="specs-info">
                                        <ul>
                                            <li id="layout_7">布局: 2 </li>
                                            <li id="area_7">平方米: 1,570</li>
                                        </ul>
                                        <strong class="item-price" id="price_7">$499,500</strong>
                                    </div><!--specs-info end-->
                                </div><!--item-info end-->
                            </div><!--sale-item end-->
                        </div>
                        
                        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6">
                            <div class="sale-item">
                                <div class="item-img">
                                    <a href="#" title="" class="ext-link">
                                        <img src="/static/bootstrap/assets/images/resources/img4.jpg" id='img_8' alt="">
                                    </a>
                                    <span class="item-status">待租的</span>
                                </div>
                                <div class="item-info">
                                    <h3><a href="#" title="" id="title_8">Dramatic and Unique Condo</a></h3>
                                    <span id="address_8">Reno Pl, San Francisco, CA 94133</span>
                                    <div class="specs-info">
                                        <ul>
                                            <li id="layout_8">布局: 2 </li>
                                            <li id="area_8">平方米: 1,570</li>
                                        </ul>
                                        <strong class="item-price" id="price_8">$499,500</strong>
                                    </div><!--specs-info end-->
                                </div><!--item-info end-->
                            </div><!--sale-item end-->
                        </div>
                        
                    </div>
                </div><!--sales-items end-->
            </div>
        </section><!--sale-items-sec end-->

        <footer>
            <div class="container">
                <div class="footer-content">
                    <div class="row">
                        <div class="col-lg-3 col_1">
                            <div class="widget widget-about">
                                <h3 class="widget-title">海螺壳</h3>
                                <p>© 2019</p>
                            </div><!--widget-about end-->
                        </div>
                        <div class="col-lg-3 col_2">
                            <div class="widget widget-contact">
                                <h3 class="widget-title">信息</h3>
                                <ul class="cont-links">
                                    <li>
                                        <i class="la la-phone"></i>
                                        +86 13653803657
                                    </li>
                                    <li>
                                        <i class="la la-map-marker"></i>
                                         河南省信阳市光山县新西亚
                                    </li>
                                    <li>
                                        <i class="la la-clock-o"></i>
                                        10AM - 9PM
                                    </li>
                                </ul>
                            </div><!--widget-contact end-->
                        </div>
                        <div class="col-lg-3 col_3">
                            <div class="widget widget-links">
                                <h3 class="widget-title">特征</h3>
                                <ul>
                                    <li><a href="#" title="">控制面板</a></li>
                                    <li><a href="#" title="">提交属性</a></li>
                                    <li><a href="#" title="">提交文档</a></li>
                                    <li><a href="#" title="">价格</a></li>
                                </ul>
                            </div><!--widget-links end-->
                        </div>
                        <div class="col-lg-3 col_4">
                            <ul class="social-links">
                                <li><a href="#" title=""><i class="fa fa-facebook"></i></a></li>
                                <li><a href="#" title=""><i class="fa fa-instagram"></i></a></li>
                                <li><a href="#" title=""><i class="fa fa-twitter"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div><!--footer-content end-->
            </div>
        </footer><!--FOOTER END-->

        <div class="popup">
            <div class="popup-content">
                <div class="popup-head">
                    <ul>
                        <li class="active" data-tab="login"><a href="#" title="">Log in</a></li>
                        <li data-tab="register"><a href="#" title="">Register</a></li>
                    </ul>
                </div><!--popup-head end-->
                <div class="popup-form current" id="login">
                    <form action="{% url 'login:login' %}" method="post">
                        {% csrf_token %}
                        <div class="form-field">
                            <input type="text" name="username" placeholder="Name">
                        </div><!--form-field end-->
                        <div class="form-field">
                            <input type="password" name="password" placeholder="Password">
                        </div><!--form-field end-->
                        <div class="form-submit">
                            <button type="submit" class="lnk-default">Log in</button>
                            <a href="#" title="" class="register-op" data-tab="register"></a>
                        </div><!--form-submit end-->
                    </form>
                </div><!--popup-form end-->
                <div class="popup-form" id="register">
                    <form  action="{% url 'register:sign_in' %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="user"></div>
                        <div class="form-field">
                            <input type="text" name="username" placeholder="username" id="username">
                        </div><!--form-field end-->
                        <div class="form-field">
                            <input type="password" name="password" placeholder="Password" id="password">
                        </div><!--form-field end-->
                        <div class="form-field">
                            <input type="date" name="birthday" placeholder="birthday" id="birthday">
                        </div><!--form-field end-->
                        <div class="form-field">
                            <input type="text" name="id_number" placeholder="id_number" id="id_number">
                        </div><!--form-field end-->
                        <div class="form-field">
                            <input type="text" name="habby" placeholder="habby" id="habby">
                        </div><!--form-field end-->
                        <div class="form-field">
                            <input type="text" name="real_name" placeholder="real_name" id="real_name">
                        </div><!--form-field end-->
                        <div class="form-field">
                            <input type="email" name="email" placeholder="email" id="email">
                        </div><!--form-field end-->
                        <div class="form-field">
                            <input type="text" name="phone" placeholder="phone" id="phone">
                        </div><!--form-field end-->
                        <div class="form-field">
                            <input type="file" name="photo" placeholder="photo" id="photo">
                        </div><!--form-field end-->
                        <div class="form-submit">
                            <button type="submit" class="lnk-default" id="sign" >Register Now</button>
                        </div><!--form-submit end-->
                    </form>
                </div><!--popup-form end-->
            </div><!--popup-content end-->
        </div><!--popup end-->

    </div><!--wrapper end-->

    <script src="/static/bootstrap/js/jquery.min.js"></script>

    <script src="/static/bootstrap/assets/js/scripts.js"></script>

    <!--    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>-->
    <!-- Bootstrap core CSS -->
    <script src="/static/bootstrap/js/bootstrap.min.js"></script>

    <script type="text/javascript">

        $.ajaxSetup({data:{csrfmiddlewaretoken:'{{ csrf_token }}'}})
        $.verify_username = function(username){
              $.ajax({
                        url:'{% url 'register:verify_user_exist' %}',
                        type:'POST',
                        data:{'username':username},
                        success:function (msg) {
                            if(msg.data==1){
                                $('#username').val('')
                                $('.user').html('<span style="padding-left: 20px;color:red">该用户已经注册,请重新输入</span>')
                                $('#sign').attr('disabled',"disabled")
                                return 1
                            }else{
                                $('.user').html('')
                                return 0
                            }
                        }
                    })
        }

        function wait_for_rent() {

            var city = $('#dropdownMenu1').html()
            $.ajax({
                url:'{% url "mision:upToDateRent" %}',
                type:'GET',
                data: {'cond':city},
                success:function (msg) {
                    var html_box = msg.html_box
                    console.log(html_box)
                    for(var i=0;i<html_box.length;i++){
                        var fy_msg = html_box[i].data
                        {#$('#img_'+String(i+1)).attr('src',fy_msg.img_url)#}
                        $('#title_'+String(i+1)).html(fy_msg.title)
                        $('#address_'+String(i+1)).html(fy_msg.address)
                        $('#layout_'+String(i+1)).html('布局:'+fy_msg.layout)
                        $('#area_'+String(i+1)).html('平方米:'+fy_msg.area)
                        $('#price_'+String(i+1)).html('￥'+fy_msg.price)
                    }
                }

            })


        }

        function chose_city(){
              var arealist = [
                  "阿勒泰","阿里","阿坝州","安康","阿拉善","鞍山","安阳","安顺","安庆","阿克苏","阿拉尔市","北京","本溪","保山市",
                  "巴中","宝鸡","滨州","巴彦淖尔","包头","白城","白山","保定","毕节","百色","北海","白银","亳州","蚌埠","巴音郭楞",
                  "博尔塔拉","保亭","白沙","成都","重庆","长春","长沙","朝阳","常州","楚雄","长治","赤峰","郴州","常德","承德",
                  "沧州","崇左","池州","巢湖","潮州","昌都","滁州","昌吉","澄迈","东莞","大连","东营","丹东","迪庆","德宏","大理",
                  "达州","德阳","大同","德州","大兴安岭","大庆","定西","儋州","东方","定安","鄂尔多斯","恩施","鄂州","佛山","福州",
                  "阜新","抚顺","防城港","阜阳","抚州","广州","贵阳","甘孜州","广安","广元","果洛","固原","赣州","贵港","桂林","甘南",
                  "杭州","哈尔滨","合肥","海口","呼和浩特","湖州","红河州","哈密地区","汉中","菏泽","海西","黄南","海北藏族自治州",
                  "海东","呼伦贝尔","葫芦岛","怀化","衡阳","黄冈","黄石","黑河","鹤岗","鹤壁","衡水","邯郸","贺州","河池","黄山",
                  "淮北","淮南","河源","惠州","淮安","海南州","和田地区","陵水","济南","金华","嘉兴","晋中","晋城","济宁","锦州",
                  "吉安","九江","景德镇","吉林","荆门","荆州","佳木斯","鸡西","焦作","酒泉","金昌","嘉峪关","揭阳","江门","济源",
                  "昆明","开封","克拉玛依","喀什","可克达拉","兰州","拉萨","聊城","辽阳","临沧市","丽江市","林芝","凉山","乐山",
                  "泸州","吕梁","临汾","临沂","莱芜","连云港","辽源","娄底","漯河","洛阳","廊坊","六盘水","来宾","柳州","临夏",
                  "陇南","龙岩","六安","丽水","临高","克孜勒苏","眉山","绵阳","牡丹江","马鞍山","梅州","茂名","南京","宁波","南昌",
                  "南宁","怒江","那曲","南充市","内江","南阳","宁德","南平","南通","盘锦","普洱","攀枝花","萍乡","平顶山","濮阳",
                  "平凉","莆田","青岛","衢州","曲靖市","七台河","齐齐哈尔","秦皇岛","黔西南","黔东南","黔南","钦州","庆阳","泉州",
                  "清远","琼海","潜江","琼中","日照","日喀则","上海","深圳","苏州","沈阳","石家庄","汕头","绍兴","山南地区","遂宁",
                  "商洛","朔州","石嘴山","上饶","宿迁","松原","四平","邵阳","随州","十堰","绥化","双鸭山","商丘","三门峡","三亚",
                  "三明","汕尾","韶关","宿州","神农架","石河子","双河","三沙","天津","太原","泰安","台州","吐鲁番地区","铜川","通辽",
                  "铁岭","通化","唐山","铜仁","天水","铜陵","泰州","塔城","天门市","图木舒克","屯昌","武汉","温州","乌鲁木齐","潍坊",
                  "威海","无锡","文山州","渭南","吴忠","乌兰察布","乌海","梧州","武威","芜湖","五家渠","五指山","文昌","万宁","西安",
                  "厦门","西宁","西双版纳","咸阳","忻州","锡林郭勒","兴安","新余","湘西","湘潭","孝感","咸宁","襄阳","许昌","新乡",
                  "信阳","邢台","宣城","徐州","仙桃市","银川","烟台","玉溪市","伊犁","雅安市","宜宾","榆林","延安","运城","阳泉","玉树",
                  "营口","宜春","鹰潭","盐城","扬州","延边","永州","益阳","岳阳","宜昌","伊春","云浮","阳江","义乌","玉林市","珠海","郑州",
                  "镇江","淄博","舟山","昭通市","资阳","自贡","枣庄","中卫","张家界","株洲","周口","驻马店","遵义","张掖","漳州","肇庆",
                  "湛江","张家口","中山"
            ]
            var ah = ''
            for(var i=0;i<arealist.length;i++){
                var area_t = arealist[i]
                ah += '<li><a href="#" class="li_area text-muted" style="font-size: small" value='+area_t+'>'+area_t+'</a></li>'
            }
            $('#btn_m_1').html(ah)
        }



        $(document).ready(function () {
            wait_for_rent()
            setInterval("wait_for_rent()",30000);

            $('#dropdownMenu1').on('click',function () {
                chose_city()
            })
            $('#btn_m_1').on('click','.li_area',function () {
                var area = $(this).attr('value')
                $('#dropdownMenu1').html(area)
            })
            $('#username').on('click',function () {
                $('#sign').removeAttr('disabled')
                var username = $(this).val()
                var reg=  /^[a-zA-Z][a-zA-Z0-9_]{4,15}$/
                var pd = reg.test(username)
                console.log(username,pd)
                if(!pd){
                    $(this).val('')
                    $(this).attr('placeholder','请重新输入，字母开头，5到15位')
                    $('#sign').attr('disabled',"disabled")
                }else{
                    $.verify_username(username)
                    $.sign_btn()
                }

            })
            $('#password').on('click',function () {

                $('#sign').removeAttr('disabled')
                var password = $(this).val()
                console.log(password)
                var reg=  /[a-zA-Z0-9_]{8,15}$/
                var pd = reg.test(password)
                if(!pd){
                    $(this).val('')
                    $(this).attr('placeholder','请重新输入,密码要高于8位')
                }

            })
            $('#phone').on('click',function () {

                $('#sign').removeAttr('disabled')
                var phone = $(this).val()
                var reg= /^[1][3,4,5,7,8][0-9]{9}$/
                var pd = reg.test(phone)
                if(!pd){
                    $(this).val('')
                    $(this).attr('placeholder','手机号格式错误，请重新输入')

                }else{
                    console.log('phone')
                    $.sign_btn()
                }

            })
            $('#sign').mouseover(function () {
                console.log('bfjhgfdfhhasdfh')
                $.sign_btn()
            })

            $.sign_btn = function(){
                console.log('fdhajkhjdakfjda')
                var arr = $('form').serialize()
                var arr_obj= getObj(arr)
                if(arr_obj.username&&arr_obj.password&&arr_obj.phone){
                    if($.verify_username(arr_obj.username)){
                        $('#sign').attr('disabled',"disabled")
                        $('.user').html('用户名已注册')
                    }

                }else{
                    $('#sign').attr('disabled',"disabled")
                    $('.user').html('缺少必须的注册信息')
                }
            }

            function getObj(str) {
                let arr = str.split('&');
                let obj = {};
                for(var i=0;i<arr.length;i++){
                    var obj_l = arr[i].split('=')
                    obj[obj_l[0]]=obj_l[1]
                }
                return obj
            }




        })


    </script>

</body>

</html>
